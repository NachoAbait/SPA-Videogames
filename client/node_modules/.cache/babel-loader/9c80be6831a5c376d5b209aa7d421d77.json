{"ast":null,"code":"import React,{useEffect,useRef}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{useParams}from\"react-router-dom\";import{getDetalle}from\"../../REDUX/ACTIONS/getDetalle\";import Barra from\"../Barra/Barra\";import css from\"./Detalles.module.css\";import{limpiarDetalle}from\"../../REDUX/ACTIONS/limpiarDetalle\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Detalles(){var _detalle$description,_detalle$parent_platf,_detalle$genres;var dispatch=useDispatch();var _useParams=useParams(),id=_useParams.id;var detalle=useSelector(function(state){return state.detalle;});var datosRef=useRef(null);var extraRef=useRef(null);useEffect(function(){dispatch(limpiarDetalle());// Limpiar el estado detalle antes de hacer la nueva solicitud\ndispatch(getDetalle(id));// Obtener los detalles del nuevo juego\n},[dispatch,id]);useEffect(function(){var altura=window.innerHeight/1.3;function handleScroll(){var distancia=datosRef.current.getBoundingClientRect().top;if(distancia<=altura){datosRef.current.classList.add(css.aparece);}else{datosRef.current.classList.remove(css.aparece);}}window.addEventListener(\"scroll\",handleScroll);return function(){window.removeEventListener(\"scroll\",handleScroll);};},[]);useEffect(function(){var altura=window.innerHeight/1.3;function handleScroll(){var distancia=extraRef.current.getBoundingClientRect().top;if(distancia<=altura){extraRef.current.classList.add(css.aparece);}else{extraRef.current.classList.remove(css.aparece);}}window.addEventListener(\"scroll\",handleScroll);return function(){window.removeEventListener(\"scroll\",handleScroll);};},[]);// Mostrar un indicador de carga mientras se espera la respuesta\nif(!detalle){return/*#__PURE__*/_jsx(\"iframe\",{src:\"https://embed.lottiefiles.com/animation/143548\",className:css.cargando});}// Mostrar los detalles del juego una vez que se obtenga la respuesta\nvar backgroundImageStyle={backgroundImage:\"url(\".concat(detalle.background_image,\")\"),backgroundSize:\"cover\",backgroundRepeat:\"no-repeat\",backgroundPosition:\"center\"};return/*#__PURE__*/_jsxs(\"div\",{className:css.container,children:[/*#__PURE__*/_jsx(Barra,{}),/*#__PURE__*/_jsx(\"div\",{className:css.principal,style:backgroundImageStyle}),/*#__PURE__*/_jsxs(\"div\",{className:css.datos,children:[/*#__PURE__*/_jsxs(\"div\",{className:css.resumen,ref:datosRef,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Resumen\"}),/*#__PURE__*/_jsx(\"p\",{children:(_detalle$description=detalle.description)===null||_detalle$description===void 0?void 0:_detalle$description.replace(/<[^>]+>/g,\"\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:css.extras,ref:extraRef,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Lanzamiento\"}),/*#__PURE__*/_jsx(\"p\",{children:detalle.released}),/*#__PURE__*/_jsx(\"h1\",{children:\"Plataformas\"}),/*#__PURE__*/_jsx(\"p\",{children:(_detalle$parent_platf=detalle.parent_platforms)===null||_detalle$parent_platf===void 0?void 0:_detalle$parent_platf.map(function(e){return e.platform.name+\" | \";})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Generos\"}),/*#__PURE__*/_jsx(\"p\",{children:(_detalle$genres=detalle.genres)===null||_detalle$genres===void 0?void 0:_detalle$genres.map(function(e){return e.name+\"  |  \";})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Website\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"a\",{target:\"blank\",href:detalle.website,children:detalle.website})})]})]})]});}","map":{"version":3,"names":["React","useEffect","useRef","useDispatch","useSelector","useParams","getDetalle","Barra","css","limpiarDetalle","jsx","_jsx","jsxs","_jsxs","Detalles","_detalle$description","_detalle$parent_platf","_detalle$genres","dispatch","_useParams","id","detalle","state","datosRef","extraRef","altura","window","innerHeight","handleScroll","distancia","current","getBoundingClientRect","top","classList","add","aparece","remove","addEventListener","removeEventListener","src","className","cargando","backgroundImageStyle","backgroundImage","concat","background_image","backgroundSize","backgroundRepeat","backgroundPosition","container","children","principal","style","datos","resumen","ref","description","replace","extras","released","parent_platforms","map","e","platform","name","genres","target","href","website"],"sources":["C:/Users/nacho/OneDrive/Escritorio/DEPLOY/SPA-Videogames/client/src/COMPONENTES/Detalles/Detalles.jsx"],"sourcesContent":["import React, { useEffect , useRef} from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { getDetalle } from \"../../REDUX/ACTIONS/getDetalle\";\r\nimport Barra from \"../Barra/Barra\"\r\nimport css from \"./Detalles.module.css\"\r\nimport { limpiarDetalle } from \"../../REDUX/ACTIONS/limpiarDetalle\";\r\n\r\nexport default function Detalles() {\r\n  const dispatch = useDispatch();\r\n  const { id } = useParams();\r\n\r\n  const detalle = useSelector((state) => state.detalle);\r\n\r\n  const datosRef = useRef(null);\r\n  const extraRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    dispatch(limpiarDetalle()); // Limpiar el estado detalle antes de hacer la nueva solicitud\r\n    dispatch(getDetalle(id)); // Obtener los detalles del nuevo juego\r\n  }, [dispatch, id]);\r\n\r\n  useEffect(() => {\r\n    const altura = window.innerHeight / 1.3;\r\n\r\n    function handleScroll() {\r\n      const distancia = datosRef.current.getBoundingClientRect().top;\r\n\r\n      if (distancia <= altura) {\r\n        datosRef.current.classList.add(css.aparece);\r\n      } else {\r\n        datosRef.current.classList.remove(css.aparece);\r\n      }\r\n    }\r\n\r\n    window.addEventListener(\"scroll\", handleScroll);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"scroll\", handleScroll);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const altura = window.innerHeight / 1.3;\r\n\r\n    function handleScroll() {\r\n      const distancia = extraRef.current.getBoundingClientRect().top;\r\n\r\n      if (distancia <= altura) {\r\n        extraRef.current.classList.add(css.aparece);\r\n      } else {\r\n        extraRef.current.classList.remove(css.aparece);\r\n      }\r\n    }\r\n\r\n    window.addEventListener(\"scroll\", handleScroll);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"scroll\", handleScroll);\r\n    };\r\n  }, []);\r\n\r\n  // Mostrar un indicador de carga mientras se espera la respuesta\r\n  if (!detalle) {\r\n    return <iframe src=\"https://embed.lottiefiles.com/animation/143548\" className={css.cargando}></iframe>;\r\n  }\r\n\r\n  // Mostrar los detalles del juego una vez que se obtenga la respuesta\r\n  const backgroundImageStyle = {\r\n    backgroundImage: `url(${detalle.background_image})`,\r\n    backgroundSize: \"cover\",\r\n    backgroundRepeat: \"no-repeat\",\r\n    backgroundPosition: \"center\",\r\n  };\r\n\r\n    return (\r\n      <div className={css.container}>\r\n        <Barra></Barra>\r\n        <div className={css.principal} style={backgroundImageStyle}>\r\n                \r\n        </div>\r\n            <div className={css.datos} > \r\n                \r\n                <div className={css.resumen} ref={datosRef}>\r\n                    <h1>Resumen</h1>\r\n                    <p>{detalle.description?.replace(/<[^>]+>/g, \"\")}</p>\r\n                </div>\r\n                <div className={css.extras} ref={extraRef} >\r\n                    <h1>Lanzamiento</h1>\r\n                    <p>{detalle.released}</p>\r\n                    <h1>Plataformas</h1>\r\n                    <p>{detalle.parent_platforms?.map((e) => {return e.platform.name + \" | \" })}</p>\r\n                    <h1>Generos</h1>\r\n                    <p>{detalle.genres?.map((e) => { return e.name + \"  |  \" })}</p>\r\n                    <h1>Website</h1>\r\n                    <p><a target=\"blank\" href={detalle.website}>{detalle.website}</a></p>\r\n                </div>\r\n             \r\n            </div>\r\n      </div>\r\n    );\r\n  }\r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module"}